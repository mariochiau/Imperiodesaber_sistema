<!DOCTYPE html>
<html lang="pt">
<head>
    <link rel="manifest" href="manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema ImpÃ©rio de Saber</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="btnInstalar" style="display: none; width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 6px; margin-bottom: 10px; font-weight: bold;">
    ğŸ“¥ Baixar Aplicativo Oficial
</button>


    <div id="tela-login">
        
        <div class="login-box">
            <img src="logo.png" style="width: 150px; display: block; margin: 0 auto 15px auto;">
            <h2 style="color: var(--primary); margin-bottom: 20px;">ImpÃ©rio de Saber</h2>
            <input type="password" id="senhaInput" placeholder="Senha de Acesso">
            <button class="btn-add" style="background: var(--primary)" onclick="fazerLogin()">Entrar</button>
            <p id="erro" style="color:var(--danger); display:none; margin-top:10px;">Senha incorreta!</p>
        </div>
    </div>

    <div id="area-gestao">
        <header>
            <h2>GestÃ£o ImpÃ©rio de Saber</h2>
            <button class="btn-logout" onclick="location.reload()">Sair</button>
        </header>


        <div class="card no-print">
            <h3>ğŸ“ Novo Cadastro</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <input type="text" id="nome" placeholder="Nome Completo">
                <input type="text" id="data" placeholder="AniversÃ¡rio (Ex: 03/12)">
                <input type="number" id="anoNasc" placeholder="Ano Nascimento">
                <input type="text" id="dataInscricao" placeholder="Data InscriÃ§Ã£o">
                <select id="grupo">
                    <option value="1Âº Ano">1Âº Ano</option>
                    <option value="2Âº Ano">2Âº Ano</option>
                    <option value="3Âº Ano">3Âº Ano</option>
                    <option value="4Âº Ano">4Âº Ano</option>
                    <option value="5Âº Ano">5Âº Ano</option>
                </select>
            </div>
            <input type="text" id="nomeMae" placeholder="Nome da MÃ£e">
            <input type="text" id="nomePai" placeholder="Nome do Pai">
            <input type="tel" id="celularPais" placeholder="Celular/WhatsApp">
            <input type="text" id="bairro" placeholder="Bairro de ResidÃªncia">
            <label style="display: block; margin-top: 10px; font-weight: bold;">Sexo:</label>
<select id="cadSexo" style="width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc;">
    <option value="Menino">Menino</option>
    <option value="Menina">Menina</option>
</select>

            <textarea id="saude" placeholder="ObservaÃ§Ãµes de SaÃºde"></textarea>
            
            <div class="btn-group">
                <button class="btn-add" onclick="adicionar()">Salvar Aluno</button>
                <button class="btn-excel" onclick="baixarExcel()">Exportar Excel</button>
                <button class="btn-print" onclick="window.print()">Imprimir PDF</button>
            </div>
        </div>

        <div class="card no-print">
            <label style="font-weight: bold; color: var(--primary);">Organizar por:</label>
            <select id="ordenarPor" onchange="renderizar()" style="width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 6px;">
                <option value="nome">Nome (A-Z)</option>
                <option value="grupo">Turma</option>
                <option value="ano">Idade</option>
                <option value="dataInscricao">Data de InscriÃ§Ã£o</option>
                <option value="data">AniversÃ¡rio</option>
            </select>
            <input type="text" id="busca" placeholder="ğŸ” Buscar aluno por nome..." onkeyup="renderizar()">
        </div>

        <table>
            <thead><tr><th>Niver</th><th>Nome do Estudante</th><th>Turma</th><th>Idade</th></tr></thead>
            <tbody id="tabela"></tbody>
        </table>
        <div id="resumoAlunos" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 1px solid #ddd; font-size: 14px;">
    <strong>ğŸ“Š Resumo da Escola:</strong>
    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 8px;">
         <span style="background: #007bff; color: white; padding: 4px 10px; border-radius: 20px;">Meninos: <span id="totalMeninos">0</span></span>
        <span style="background: #e83e8c; color: white; padding: 4px 10px; border-radius: 20px;">Meninas: <span id="totalMeninas">0</span></span>
        <span style="background: var(--primary); color: white; padding: 4px 8px; border-radius: 4px;">Total: <span id="totalGeral">0</span></span>
        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px;">1Âº Ano: <span id="totalT1">0</span></span>
        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px;">2Âº Ano: <span id="totalT2">0</span></span>
        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px;">3Âº Ano: <span id="totalT3">0</span></span>
        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px;">4Âº Ano: <span id="totalT4">0</span></span>
        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px;">5Âº Ano: <span id="totalT5">0</span></span>
    </div>
</div>

    </div>

    <div id="modalAluno" class="modal">
        <div class="modal-content">
            <div id="viewPerfil">
                <div class="foto-perfil-container">
                    <img id="mFotoPreview" class="foto-preview" src="" alt="Foto">
                    <div class="no-print"><label style="cursor:pointer; color:blue; font-size:12px;">[ Alterar Foto ]<input type="file" id="inputFoto" hidden accept="image/*" onchange="uploadFoto(this)"></label></div>
                </div>
                <div id="mNome" class="ficha-nome"></div>
                <div class="info-linha">ğŸ‚ <b>Niver:</b> <span id="mData"></span></div>
                <div class="info-linha">ğŸ“… <b>InscriÃ§Ã£o:</b> <span id="mInsc"></span></div>
                <div class="info-linha">ğŸ« <b>Turma:</b> <span id="mAnoEscolar"></span></div>
                <div class="info-linha">ğŸ‘©â€ğŸ¼ <b>MÃ£e:</b> <span id="mMae"></span></div>
                <div class="info-linha">ğŸ‘¨â€ğŸ¼ <b>Pai:</b> <span id="mPai"></span></div>
                <div class="info-linha">ğŸ“ <b>Celular:</b> <span id="mCel"></span></div>
                <div class="info-linha">ğŸ  <b>Bairro:</b> <span id="mBairro"></span></div>
                <div class="info-linha">ğŸ¥ <b>SaÃºde:</b> <span id="mSaude"></span></div>
                <div class="info-linha" style="display: block; margin-top: 15px;">
    <h4 style="color: var(--primary); margin-bottom: 5px;">ğŸ“ ObservaÃ§Ãµes do Admin:</h4>
    <p id="mObservacao" style="background: #fff8e1; padding: 10px; border-radius: 6px; border-left: 4px solid var(--accent); min-height: 20px; font-style: italic;"></p>
    <div class="no-print" style="margin-top: 10px; display: flex; gap: 5px; flex-direction: column;">
    <textarea id="inputObs" placeholder="Escreva ou edite a observaÃ§Ã£o..." style="height: 80px;"></textarea>
    <div style="display: flex; gap: 5px;">
        <button class="btn-add" style="flex: 2; font-size: 12px;" onclick="salvarObservacao()">Salvar / Editar</button>
        <button style="flex: 1; background: var(--danger); color: white; border: none; border-radius: 6px; font-size: 11px; cursor: pointer;" onclick="removerObservacao()">Remover</button>
    </div>
</div>
</div>

                <button class="btn-edit no-print" onclick="toggleEdit(true)">EDITAR PERFIL</button>
            </div>

            <div id="editPerfil" style="display:none;">
                <h3 style="color:var(--primary)">Corrigir Dados</h3>
                <input type="text" id="eNome" placeholder="Nome">
                <input type="text" id="eData" placeholder="Niver">
                <input type="text" id="eInsc" placeholder="Data InscriÃ§Ã£o">
                <input type="number" id="eAnoNasc" placeholder="Ano Nasc">
                <input type="text" id="eMae" placeholder="MÃ£e">
                <input type="text" id="ePai" placeholder="Pai">
                <input type="text" id="eCel" placeholder="Celular">
                <input type="text" id="eBairro" placeholder="Bairro">
                <textarea id="eSaude" placeholder="SaÃºde"></textarea>
                <button class="btn-add" onclick="salvarEdicao()">SALVAR ALTERAÃ‡Ã•ES</button>
                <button style="background:#666; margin-top:5px;" onclick="toggleEdit(false)">CANCELAR</button>
            </div>
            
            <hr>
            <hr>
<h3 style="color:var(--primary); margin-top:20px;">ğŸ“‚ Ficheiros e Documentos</h3>

<div class="bloco-docs">
    <h4 class="titulo-bloco">ğŸ“‹ Documentos de InscriÃ§Ã£o</h4>
    <div class="upload-container-novo">
        <select id="tipoDocInsc">
            <option value="CÃ©dula/Boletim">CÃ©dula ou Boletim</option>
            <option value="Sanidade">DeclaraÃ§Ã£o de Sanidade</option>
            <option value="InscriÃ§Ã£o">Comprovativo de InscriÃ§Ã£o</option>
        </select>
        <label class="btn-upload-admin">
            <span>Selecione o Arquivo</span>
            <input type="file" id="inputDocInsc" hidden onchange="uploadDocInscricao(this)">
        </label>
    </div>
    <div id="listaDocsInsc"></div>
</div>

<div class="bloco-docs" style="margin-top:15px;">
    <h4 class="titulo-bloco">ğŸ’° Mensalidades e Pagamentos</h4>
    <div class="upload-container-novo">
        <select id="mesDoc">
            <option value="Janeiro">Janeiro</option>
            <option value="Fevereiro">Fevereiro</option>
            <option value="MarÃ§o">MarÃ§o</option>
            <option value="Abril">Abril</option>
            <option value="Maio">Maio</option>
            <option value="Junho">Junho</option>
            <option value="Julho">Julho</option>
            <option value="Agosto">Agosto</option>
            <option value="Setembro">Setembro</option>
            <option value="Outubro">Outubro</option>
            <option value="Novembro">Novembro</option>
            <option value="Dezembro">Dezembro</option>
        </select>
        <input type="date" id="dataPagDoc" title="Data do Pagamento">
        <label class="btn-upload-admin" style="background: var(--secondary);">
            <span>Anexar Recibo</span>
            <input type="file" id="inputDocMensal" hidden onchange="uploadDocMensalidade(this)">
        </label>
    </div>
    <div id="listaDocsMensal"></div>
</div>


            <h3 style="color:var(--primary); margin-top:20px;">ğŸ’° Mensalidades</h3>
            <div id="mMensalidades" class="grid-mensalidade"></div>
            
            <button onclick="fecharModal()" style="background:#555; margin-bottom:10px;">VOLTAR</button>
            <button class="btn-excluir" style="background: var(--danger); ... " onclick="excluirAluno()">
    EXCLUIR ALUNO
</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script type="module" src="firebase-config.js"></script>
</body>
</html>
